id: TRANSFER-SIMPLE-001
description: A simple SOL transfer from one wallet to another to test basic tool selection and parameterization.
tags: ["system-program", "transfer", "t2"]

# Defines the on-chain state at the beginning of the test.
# Placeholders like USER_WALLET_PUBKEY will be replaced by the test runner.
initial_state:
  - pubkey: "USER_WALLET_PUBKEY"
    owner: "11111111111111111111111111111111" # System Program
    lamports: 1000000000 # 1 SOL

  - pubkey: "RECIPIENT_WALLET_PUBKEY"
    owner: "11111111111111111111111111111111" # System Program
    lamports: 0

# The natural language prompt given to the agent.
prompt: "Please send 0.1 SOL from my wallet (USER_WALLET_PUBKEY) to the recipient (RECIPIENT_WALLET_PUBKEY)."

# The objective criteria for judging the agent's performance.
ground_truth:
  # A list of on-chain conditions that must be true after the agent has finished.
  final_state_assertions:
    - type: SolBalance
      pubkey: "RECIPIENT_WALLET_PUBKEY"
      expected: 100000000 # 0.1 SOL

    # Note: Checking the sender's balance is tricky due to variable fees.
    # A more robust check would be 'balance_less_than' or 'balance_change_approx'.
    # For this simple case, we'll assume a fixed fee of 5000 lamports.
    - type: SolBalance
      pubkey: "USER_WALLET_PUBKEY"
      expected: 899995000 # 1 SOL - 0.1 SOL - 0.000005 SOL fee

  # The ideal sequence of tool calls the agent should make.
  expected_tool_calls:
    - tool_name: "system_transfer"
      parameters:
        from_pubkey: "USER_WALLET_PUBKEY"
        to_pubkey: "RECIPIENT_WALLET_PUBKEY"
        lamports: 100000000
