id: 112-JUP-LEND-DEPOSIT-WITHDRAW-SOL
description: A benchmark to test depositing and then withdrawing native SOL using Jupiter's unified lend feature.
tags: ["jupiter", "lend", "withdraw", "sol", "surfpool"]

initial_state:
  # User's main wallet with 5 SOL for transaction fees.
  - pubkey: "USER_WALLET_PUBKEY"
    owner: "11111111111111111111111111111111" # System Program
    lamports: 5000000000 # 5 SOL

  # A dummy recipient, sometimes required by test setup helpers.
  - pubkey: "RECIPIENT_WALLET_PUBKEY"
    owner: "11111111111111111111111111111111"
    lamports: 0

prompt: "Using Jupiter, lend (deposit) 0.1 SOL and then withdraw 0.1 SOL. My wallet is USER_WALLET_PUBKEY."

ground_truth:
  final_state_assertions:
    # The net change in SOL balance should be minimal, accounting only for transaction fees.
    # We assert the balance has decreased by a small amount (less than 0.005 SOL).
    - type: SolBalanceChange
      pubkey: "USER_WALLET_PUBKEY"
      expected_change_gte: -5000000 # A small negative value for fees
      weight: 1.0

  # For this complex DeFi interaction, success is determined by the on-chain state assertions.
