id: 110-jup-lend-deposit-sol
description: A benchmark to test depositing native SOL using Jupiter's unified lend feature.
tags: ["jupiter", "lend", "deposit", "sol", "surfpool"]

initial_state:
  # User's main wallet with 2 SOL.
  - pubkey: "USER_WALLET_PUBKEY"
    owner: "11111111111111111111111111111111" # System Program
    lamports: 5000000000 # 5 SOL

  # A dummy recipient, required by the test setup but not used in the lend.
  - pubkey: "RECIPIENT_WALLET_PUBKEY"
    owner: "11111111111111111111111111111111"
    lamports: 0

prompt: "Deposit 0.1 SOL into Jupiter lending. My wallet is USER_WALLET_PUBKEY."

ground_truth:
  final_state_assertions:
    # The exact final SOL balance is non-deterministic due to transaction fees.
    # We assert that the balance has decreased by at least 0.1 SOL (100,000,000 lamports).
    # A slightly larger amount is used to account for potential fees.
    - type: SolBalanceChange
      pubkey: "USER_WALLET_PUBKEY"
      expected_change_gte: -105000000
      weight: 1.0

  # For this complex DeFi interaction, success is determined by the on-chain state assertions,
  # not by a deterministic instruction set.
